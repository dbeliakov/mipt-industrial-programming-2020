<!DOCTYPE html><html lang="en"><head><title>Промышленное программирование</title><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="../../../common/shower/themes/ribbon/styles/screen-16x10.css"><style type="text/css">.caption {
    color: #FFF;
}</style></head><body class="shower list"><header class="caption"><h1>Промышленное программирование</h1><p>Лекция 2. Модели ветвления</p></header><section id="cover" class="slide"><h2>Лекция 2. Модели ветвления</h2><p>Промышленное программирование @ МФТИ, 2020-2021</p><img src="../../../common/cover.jpg" alt="" class="cover"><style type="text/css">#cover h2 {
    margin: 30px 0 0;
    color: #FFF;
    text-align: center;
    font-size: 70px;
    text-shadow: black 1px 1px 0, black -1px -1px 0, 
                 black -1px 1px 0, black 1px -1px 0;
}
#cover p {
    margin: 10px 0 0;
    text-align: center;
    color: #FFF;
    font-style: italic;
    font-size: 20px;
    text-shadow: black 1px 1px 0, black -1px -1px 0, 
                 black -1px 1px 0, black 1px -1px 0;
}
#cover p a {
    color: #FFF;
    text-shadow: black 1px 1px 0, black -1px -1px 0, 
                 black -1px 1px 0, black 1px -1px 0;
}</style></section><section class="slide"><h2>Модели ветвления</h2><ul><li>В современной разработке VCS не только про контроль изменений, но и про организацию разработки</li><li>VCS позволяют координировать разработку крупного проекта</li><li>Модели ветвления (workflow) - практики, упрощающие работу над проектом</li><li>Смысл модели ветвления в том, чтобы организовать добавление и публикацию изменений в исходном коде репозитория</li></ul></section><section class="slide"><h2>Модели ветвления</h2><ul><li>Модель ветвления это не правило, которому нужно следовать, а скорее путеводитель</li><li>Можете просто выбрать определенные аспекты и сочетать их так как вам нужно</li><li>Несколько примеров: Feature Branch Workflow, Gitflow, Trunk-Based Development</li></ul></section><section class="slide"><h2>Feature Branch Workflow</h2><ul><li>Вся работа над новой функциональностью должна производится в отдельной ветке</li><li>Такая инкапсуляция облегчает работу нескольких разработчиков над общей функциональностью в рамках одной кодовой базы</li><li>Также это значит, что нерабочий код никогда не попадет в ветку master, если процессы интеграции реализованы правильным образом и эффективно обеспечивают контроль качества</li></ul></section><section class="slide"><h2>Feature Branch Workflow</h2><ul><li>Новая функциональность при добавлении должна проходить процесс код-ревью (PR в master)</li><li>В PR производится доработка недостатков, выявленных другими разработчиками</li><li>В master добавляется уже полностью готовая функциональность</li></ul></section><section class="slide"><h2>Feature Branch Workflow</h2><ul><li><code>git checkout -b new-feature</code> (лучше давать осмысленные названия веткам)</li><li><code>git push -u origin new-feature</code></li><li><code>git merge new-feature</code></li></ul></section><section class="slide"><h2>Trunk-Based Development</h2><ul><li>Trunk-Based Development не является новым подходом. Он был тактически продуман еще в восьмидесятых годах, а с середины девяностых стал набирать популярность. Крупнейшие разработчики программных продуктов, такие как Google и Facebook, широко применяют данный подход в организции разработки</li></ul></section><section class="slide"><h2>Trunk-Based Development</h2><ul><li>Разработчики совместно работают над кодом в одной ветке, называемой «главной» (master в Git)</li><li>Второстепенные feature-ветки также могут создаваться, но они имеют короткий срок жизни</li><li>Данный подход позволяет разработчикам избежать сложностей связанных со слиянием веток</li></ul></section><section class="slide"><h2>Trunk-Based Development</h2><ul><li>При использовании разработки на основе главной ветки процессы непрерывной интеграции и непрерывной поставки являются критически необходимыми, так как позволяют участникам команды прогнозируемо интегрировать свои наработки в основной код с обеспечением гарантии качества результата</li><li>Релизы могут быть в отдельных ветках, отведенных от master, однако коммитить в них можно только hotfix</li><li>В master ветке нужно уметь ограничивать неготовый к релизу функционал</li></ul></section><section class="slide"><h2>Gitflow</h2><img src="img/gitflow.png" height="80%"></section><section class="slide"><h2>Gitflow</h2><ul><li>Модель ветвления Gitflow была впервые опубликована и стала популярной, благодаря статье <a href="https://nvie.com/posts/a-successful-git-branching-model/">Vincent Driessen</a></li><li>Предполагает выстраивание строгой модели ветвления вокруг релиза проекта, которая дает надежную схему управления крупными проектами</li><li>Отлично подходит для проектов, которые имеют спланированный цикл релиза</li></ul></section><section class="slide"><h2>Gitflow</h2><ul><li>Кроме feature-веток в Gitflow используются отдельные ветки для подготовки, поддержки и записи релиза</li><li>Gitflow использует собственный набор инструментов <a href="https://github.com/nvie/gitflow">git-flow</a>, который легко интегрируется с Git, добавляя новые команды Git</li></ul></section><section class="slide"><h2>Gitflow</h2><ul><li>В ветке master хранится официальная история релиза, а ветка develop служит в качестве интеграционной ветки для новых функций</li><li>Удобно тегировать все коммиты в ветке master номером версии</li><li>Ветка develop отводится от ветки master в начале работы над проектом</li></ul></section><section class="slide"><h2>Gitflow</h2><ul><li><code>git branch develop</code></li><li><code>git push -u origin develop</code></li><li>(при работе с git-flow) <code>git flow init</code></li></ul></section><section class="slide"><h2>Gitflow</h2><ul><li>Каждая новая функциональность должна разрабатываться в отдельной ветке</li><li>Ветки функций создаются не на основе master, a на основе develop</li><li>Когда работа над новой функциональностью завершена, она вливается назад в develop</li><li>Новый код не должен отправляться напрямую в master</li></ul></section><section class="slide"><h2>Gitflow</h2><img src="img/gitflow1.png" height="80%"></section><section class="slide"><h2>Gitflow</h2><ul><li><code>git checkout develop</code></li><li><code>git checkout -b feature_branch</code></li><li>(при работе с git-flow) <code>git flow feature start feature_branch</code></li></ul></section><section class="slide"><h2>Gitflow</h2><ul><li><code>git checkout develop</code></li><li><code>git merge feature_branch</code></li><li>(при работе с git-flow) <code>git flow feature finish feature_branch</code></li></ul></section><section class="slide"><h2>Gitflow</h2><ul><li>Когда принято решение о релизе, от ветки develop создается ветка release</li><li>Новая функциональность в релиз не добавляется, а только исправляются баги</li><li>Когда все готово, ветка release сливается в master, и ей присваивается тег с версией</li><li>Кроме этого, она должна быть также слита обратно в ветку develop</li></ul></section><section class="slide"><h2>Gitflow</h2><img src="img/gitflow2.png" height="80%"></section><section class="slide"><h2>Gitflow</h2><ul><li><code>git checkout develop</code></li><li><code>git checkout -b release/0.1.0</code></li><li>(при работе с git-flow) <code>git flow release start 0.1.0</code></li></ul></section><section class="slide"><h2>Gitflow</h2><ul><li><code>git checkout develop</code></li><li><code>git merge release/0.1.0</code></li><li>(при работе с git-flow) <code>git flow release finish '0.1.0'</code></li></ul></section><div class="progress"></div><script src="../../../common/shower/shower.min.js"></script></body></html>